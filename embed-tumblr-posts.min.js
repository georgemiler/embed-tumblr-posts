/*
 MIT License
*/
(function(d,c,k){var f=d.window,c=new c("jp.or.tateya.embed-tumblr-posts",d),e;if(!(e=c.find("EmbedTumblrPosts")))e=function a(g,b){b=b||{};this.settings=h.objectMerge(a.DEFAULT_SETTINGS,b);this.targetElement=g;if(!(g instanceof Element))throw new TypeError("This class is required argument targetElement.");this.contextNode=g.ownerDocument},e.prototype.constructor=e,e.DEFAULT_SETTINGS={api_key:null,"base-hostname":"example.com",limit:10,offset:0},e.prototype.run=function(){},c.install("EmbedTumblrPosts",
e);var l=e;if(!(e=c.find("preparation"))){var b=function(a){var a=b.getCurrentScriptElement(a),g=h.objectMerge.apply(h,[b.parseEmbedSettingsText(a),b.parseQueryString(a)]);b.listener=b.createListener(a,g);b.addListener()};b.listener=function(){return k};b.addListener=function(){f.addEventListener("DOMContentLoaded",b.listener)};b.createListener=function(a,g){var b=new l(a,g);return function(a){b.run(a)}};b.getCurrentScriptElement=function(a){a=a.getElementsByTagNameNS("http://www.w3.org/1999/xhtml",
"script");return a[a.length-1]};b.parseQueryString=function(a){a=a.getAttribute("src");a=(h.parseUri(a).search||"?").slice(1);return h.parseQueryString(a)};b.parseEmbedSettingsText=function(a){a=h.extractContentsFromCdataSection(a.textContent);return JSON.parse(a||"{}")};c.install("preparation",b);e=b}var j;if(!(j=c.find("util")))j={objectMerge:function(a){for(var b=arguments,c={},e=0,k=b.length,d,f;e<k;e++)for(f in d=b[e])c[f]=d[f];return c},parseUri:function(a){var b=document.createElementNS("http://www.w3.org/1999/xhtml",
"a");b.setAttribute("href",a);return b},parseQueryString:function(a){for(var b={},a=a.split(/[;&]/),c=0,e=a.length,f;c<e;c++)f=a[c].split("="),b[f[0]]=f[1]||!0;return b},extractContentsFromCdataSection:function(a){a=a.replace(/^<!\[CDATA\[/,"");return a=a.replace(/\]\]>$/,"")},extractHtmlTags:function(a){return a=a.replace(/<.+?>/g,"")},escapeHtmlTags:function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");return a=a.replace(/>/g,"&gt;")}},c.install("util",j);var h=j;if(f===d){if("undefined"!==
typeof f.navigator&&/MSIE/.test(f.navigator.userAgent)){var i=f.document;"function"!==typeof d.Window.prototype.addEventListener&&(d.Window.prototype.addEventListener=function(a,b){var c=this,b=function(a){"onreadystatechange"===a.type&&"complate"!==this.readyState||b.call(c,a)};"DOMContentLoaded"!==a?i.attachEvent("onreadystatechange",b):this.attachEvent("on"+a,b)});"function"!==typeof i.createElementNS&&(i.createElementNS=function(a,b){return this.createElement(b)});"function"!==typeof i.getElementsByTagNameNS&&
(i.getElementsByTagNameNS=function(a,b){return this.getElementsByTagName(b)});"string"!==typeof i.createElementNS("http://www.w3.org/1999/xhtml","div").textContent&&"function"===typeof Object.defineProperty&&Object.defineProperty(Element.prototype,"textContent",{get:function(){return this.extractHtmlTags(this.innerHTML)},set:function(a){return this.innerHTML=h.escapeHtmlTags(a)},configurable:!0,enumerable:!1})}e(f.document)}})(this,function(){var d=function(c,d){for(var d=d||{},f=c.split("."),e=0,
l=f.length,b;e<l;e++)b=f[e],d=d[b]=d[b]||{};this.path=d};d.prototype.find=function(c){c=this.path[c];return"undefined"!==typeof c?c:null};d.prototype.install=function(c,d){return this.path[c]=d};return d}(),void 0);
